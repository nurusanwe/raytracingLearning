# Story 1.1: Project Setup and Build System

## Status
Draft

## Story
**As a** graphics programming learner,  
**I want** a properly configured CMake build system with Apple Silicon optimization support,  
**so that** I have a solid development foundation that can scale from simple calculations to complex rendering features.

## Acceptance Criteria
1. CMake build system successfully compiles C++20/C++23 code on Apple Silicon with appropriate optimization flags
2. Project structure includes clear separation for source, headers, tests, and documentation with educational organization
3. Git repository is initialized with .gitignore appropriate for C++ development and learning milestone branching strategy
4. README includes build instructions, learning objectives, and architectural decision rationale for future reference
5. Basic unit testing framework is integrated and demonstrates mathematical validation capability

## Tasks / Subtasks
- [ ] Setup CMake Build System (AC: 1)
  - [ ] Create CMakeLists.txt with C++20/C++23 support
  - [ ] Configure Apple Silicon optimization flags (-mcpu=apple-m1, -O3)
  - [ ] Set up cross-platform compatibility with preprocessor directives
  - [ ] Implement educational build visibility (show compilation steps)
- [ ] Create Project Directory Structure (AC: 2)
  - [ ] Create src/ directory with core/, materials/, ui/, platform/ subdirectories
  - [ ] Create tests/ directory for mathematical correctness tests
  - [ ] Create external/ directory for minimal dependencies
  - [ ] Create epic_checkpoints/ directory for learning milestones
  - [ ] Create docs/ directory structure (already exists, verify alignment)
- [ ] Initialize Git Repository (AC: 3)
  - [ ] Create .gitignore for C++ development (build/, .DS_Store, IDE files)
  - [ ] Set up learning milestone branching strategy
  - [ ] Create initial commit with project structure
- [ ] Create Educational Documentation (AC: 4)
  - [ ] Write README.md with build instructions
  - [ ] Document learning objectives and epic progression
  - [ ] Include architectural decision rationale
  - [ ] Add troubleshooting section for common build issues
- [ ] Integrate Unit Testing Framework (AC: 5)
  - [ ] Set up mathematical correctness testing framework
  - [ ] Create test_math_correctness.cpp template
  - [ ] Implement basic Vector3 test validation example
  - [ ] Verify testing framework compiles and runs
- [ ] Verify Complete Build System (AC: 1)
  - [ ] Run complete build using build_simple.sh
  - [ ] Verify C++20/C++23 compilation succeeds
  - [ ] Confirm Apple Silicon optimization flags are applied
  - [ ] Test cross-platform compatibility basics

## Dev Notes

### Architecture Context
**Source:** [docs/architecture/introduction.md#starter-template-decision]
- Educational-specific build system prioritizing single command setup
- Build process shows exactly what's happening (no hidden CMake complexity)
- Incremental complexity - build requirements grow with epic progression

**Source:** [docs/architecture/high-level-architecture.md#platform-and-infrastructure-choice]
- Primary platform: Apple Silicon (macOS) with cross-platform abstraction
- Native C++ executable with educational progression from console to GUI
- NEON vectorization and Metal Performance Shaders optimization targets

### Project Structure Details
**Source:** [docs/architecture/risk-mitigated-project-structure-simplified-educational-focus.md]
```
raytracer/
├── src/                     # Single evolving codebase
│   ├── main.cpp             # Epic 1 single-ray → Epic 6 production ray tracer
│   ├── core/                # Core mathematical and rendering components
│   ├── materials/           # Material implementations (Epic 1+)
│   ├── ui/                  # Dear ImGui integration (Epic 2+)
│   └── platform/            # Platform abstraction (Epic 6)
├── external/                # Minimal external dependencies
├── epic_checkpoints/        # Git-based learning milestones
├── tests/                   # Mathematical correctness testing
├── tools/                   # Educational tools (educational_report.cpp)
├── docs/                    # Educational documentation
└── assets/                  # Minimal test assets
```

### Build System Requirements
**Source:** [docs/architecture/introduction.md#starter-template-decision]
- Single command setup: `./build_simple.sh` works on any system
- Educational visibility: show compilation steps and flags
- Cross-platform foundation using preprocessor directives, not complex abstractions
- Apple Silicon optimization with NEON vectorization preparation

### Testing Requirements
**Source:** [docs/architecture/testing-strategy.md#core-testing-framework]
- Mathematical correctness validation focus
- Test file: `tests/test_math_correctness.cpp`
- Educational testing pyramid: Unit → Mathematical → Visual → Learning validation
- Energy conservation and mathematical precision validation

### Testing Framework Implementation
**Source:** [docs/architecture/testing-strategy.md#mathematical-correctness-testing]
```cpp
// tests/test_math_correctness.cpp - Primary educational validation
#include "src/core/vector3.hpp"
namespace MathematicalTests {
    bool test_vector3_operations() {
        Vector3 a(1, 2, 3);
        Vector3 b(4, 5, 6);
        float dot_result = a.dot(b);
        float expected_dot = 1*4 + 2*5 + 3*6; // 32
        assert(abs(dot_result - expected_dot) < 1e-6);
        return true;
    }
}
```

### Educational Build Features
- Compilation visibility for learning
- Progressive dependency introduction (no front-loading)
- Mathematical validation capability from Epic 1
- Cross-platform compatibility without complexity

### File Locations
- CMakeLists.txt: Project root
- Main source: src/main.cpp
- Test framework: tests/test_math_correctness.cpp
- Build scripts: build_simple.sh, validate_epic.sh (project root)
- Educational tools: tools/educational_report.cpp
- Documentation: README.md

## Testing
**Test File Location:** tests/test_math_correctness.cpp  
**Testing Framework:** Custom mathematical validation framework  
**Testing Standards:** Mathematical correctness validation with 1e-6 precision tolerance  
**Story-Specific Requirements:**
- Build system must compile and run basic mathematical tests
- Test framework integration must be functional for future Vector3 validation
- Cross-platform build compatibility verification

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-08-12 | 1.0 | Initial story creation from Epic 1.1 requirements | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
_TBD - To be populated by development agent during implementation_

### Debug Log References
_TBD - To be populated by development agent during implementation_

### Completion Notes List
_TBD - To be populated by development agent during implementation_

### File List
_TBD - To be populated by development agent during implementation_

## QA Results
_TBD - To be populated by QA Agent after story implementation completion_